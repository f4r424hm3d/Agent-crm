# Frontend History - 21-02-26

## What was Changed
- **Agent List UI**: Refactored the agents table for a cleaner look.
    - Merged **Name**, **Company**, and **Location** into a single "Agent Profile" column.
    - Merged **Email** and **Phone** into a "Contact" column with icons.
- **Agent Registration Success**: Updated `AgentRegistrationSuccess.jsx` for dynamic support email.
- **Application Status**: Updated `ApplicationStatus.jsx` for dynamic support email.
- **Permission Toggle**: Simplified the login permission toggle. Replaced the custom modal with a direct toggle on the Lock/Unlock icon, protected by an `AlertDialog` confirmation.
- **Inline Agent Editing**: Consolidated viewing and editing into `AgentDetailView.jsx`. Added "Edit Mode" with inline inputs, validation, and save/cancel functionality.
- **Storage Unification**: Unified agent document storage paths across all upload methods to use the `[name]_[sanitized_email]` pattern.
- **Bug Fix**: Resolved `ReferenceError: AccessModal is not defined` and cleaned up residual syntax errors in `AgentList.jsx`.
- **Forced Logout Notification**: Implemented user feedback for access revocation.
    - `apiClient.js`: Stores `logoutReason` in `localStorage` on 403 errors and preserves `role` for redirect.
    - `Login.jsx`: Displays a clear notification alert if a logout reason is found and handles role-based URL parameters.
- **Login Redirect Fix**: Updated `apiClient.js` to exclude `/auth/login` endpoints from global 401 redirects, ensuring users stay on the login page for credential errors.
- **Header Synchronization**: Unified `AgentDetailView.jsx` header with `AgentList.jsx`, incorporating `PageHeader` with breadcrumbs and a consistent title/button layout for desktop and mobile.
- **Sidebar UI Enhancement**: Implemented hover-to-expand sidebar for desktop:
    - Default collapsed state (icons only) for maximized workspace.
    - Smooth expansion overflow on hover with visible labels and logo.
    - **UI Fixes**: Resolved z-index conflict (sidebar now overlays Navbar), fixed mobile icon-label spacing, and refined logo alignment.
    - Maintained drawer navigation for mobile devices.
- **Responsiveness**: Optimized `AgentDetailView.jsx` layout for mobile, making the profile card sticky only on large screens and fixing header element stacking.
- **Bug Fixes**: Verified that agent email updates now correctly persist and displayed success feedback.

## What was Fixed
- Fixed hardcoded email addresses on application tracker and registration success pages.
- Ensured settings are properly fetched using the `settingsSlice` before rendering support contact info.

## File Operation Tracking

### Files Created
- `frontend/src/utils/validation/agent/agentEditValidation.js` (Specialized validation for inline editing).

### Files Updated
- `frontend/src/pages/agents/AgentList.jsx` (Refactored columns, removed legacy edit button).
- `frontend/src/services/apiClient.js` (Added 403 status handling for force logout and logoutReason storage).
- `frontend/src/pages/agents/AgentDetailView.jsx` (Implemented inline editing).
- `frontend/src/pages/auth/Login.jsx` (Added logout notification alert).
- `frontend/src/App.jsx` (Removed legacy edit route).
- `frontend/src/services/agentService.js` (Cleaned up redundant methods).
- `frontend/src/pages/AgentRegistrationSuccess.jsx` (Dynamic email support).
- `frontend/src/pages/ApplicationStatus.jsx` (Dynamic email support).
- `frontend/src/components/layout/Sidebar.jsx` (Implemented hover expansion and mobile fixes).
- `frontend/src/components/layout/Navbar.jsx` (Adjusted offset for collapsed sidebar).
- `frontend/src/components/layout/DashboardLayout.jsx` (Adjusted main content margin).

### Files Archived (delete folder)
- `frontend/src/pages/agents/AdminEditAgent.jsx` -> `delete/frontend/src/pages/agents/AdminEditAgent.jsx`
